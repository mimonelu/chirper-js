(()=>{var o=Math.PI*.5,l={none:(i,s)=>1,in:(i,s)=>i/s,out:(i,s)=>1-i/s,sin:(i,s)=>Math.sin(i/s*Math.PI),sinInv:(i,s)=>1-Math.sin(i/s*Math.PI),sinHalf:(i,s)=>Math.sin(i/s*o),sinHalfInv:(i,s)=>1-Math.sin(i/s*o),cos:(i,s)=>Math.cos(i/s*Math.PI),cosInv:(i,s)=>1-Math.cos(i/s*Math.PI),cosHalf:(i,s)=>Math.cos(i/s*o),cosHalfInv:(i,s)=>1-Math.cos(i/s*o),tan:(i,s)=>Math.tan(i/s*Math.PI),tanInv:(i,s)=>1-Math.tan(i/s*Math.PI)};var p=Math.PI*.5,x=Math.PI*2,d=(i,s)=>Math.random()*(s-i)+i,M={noise(i,s){for(let t=0,e=i.length;t<e;t++){let a=d(-1,1)*s.special*l[s.specialEasing](t,e);i[t]=a*s.volume*l[s.volumeEasing](t,e)}},sin(i,s){for(let t=0,e=i.length;t<e;t++){let a=s.rate*s.special*l[s.specialEasing](t,e);i[t]=Math.sin(t/e*Math.PI*a)*s.volume*l[s.volumeEasing](t,e)}},cos(i,s){for(let t=0,e=i.length;t<e;t++){let a=s.special*l[s.specialEasing](t,e),n=Math.cos(t/e*Math.PI*2048*a);i[t]=n*s.volume*l[s.volumeEasing](t,e)}},tan(i,s){for(let t=0,e=i.length;t<e;t++){let a=s.special*l[s.specialEasing](t,e),n=Math.tan(t/e*Math.PI*1024*a);i[t]=n*s.volume*l[s.volumeEasing](t,e)}},square(i,s){let t=1;for(let e=0,a=i.length;e<a;e++)e%Math.round(512*s.special*l[s.specialEasing](e,a))==0&&(t*=-1),i[e]=t*s.volume*l[s.volumeEasing](e,a)},triangle(i,s){let t=0,e=-1;for(let a=0,n=i.length;a<n;a++)e>=1?t=-.2*s.special*l[s.specialEasing](a,n):e<=-1&&(t=.2*s.special*l[s.specialEasing](a,n)),e+=t,i[a]=e*s.volume*l[s.volumeEasing](a,n)},and(i,s){for(let t=0,e=i.length;t<e;t++){let a=s.special*l[s.specialEasing](t,e),n=Math.sin(t/e*Math.PI*(e&t)*a);i[t]=n*s.volume*l[s.volumeEasing](t,e)}},or(i,s){for(let t=0,e=i.length;t<e;t++){let a=s.special*l[s.specialEasing](t,e),n=Math.sin(t/e*Math.PI*(e|t)*a);i[t]=n*s.volume*l[s.volumeEasing](t,e)}},explosion(i,s){let t=0;for(let e=0,a=i.length;e<a;e++)e%Math.round(64*s.special*l[s.specialEasing](e,a))==0&&(t=d(-1,1)),i[e]=t*s.volume*l[s.volumeEasing](e,a)},spring(i,s){let t=0;for(let e=0,a=i.length;e<a;e++)t=e/a,i[e]=(e%Math.round(256*s.special*l[s.specialEasing](e,a))==0?1:(t-.5)*2)*(1-t)*s.volume*l[s.volumeEasing](e,a)},warp(i,s){for(let t=0,e=i.length;t<e;t++){let a=s.special*l[s.specialEasing](t,e),n=Math.sin(Math.pow(t/e*Math.PI,2*a)*1e3);i[t]=n*s.volume*l[s.volumeEasing](t,e)}},bell(i,s){let t=1;for(let e=0,a=i.length;e<a;e++){let n=s.rate/(2048*s.special*l[s.specialEasing](e,a))*t;e%128==0&&(t*=-1),i[e]=Math.sin(e/n*Math.PI)*s.volume*l[s.volumeEasing](e,a)}},phone(i,s){for(let t=0,e=i.length;t<e;t++)i[t]=Math.sin(t*.05)*Math.sin(t/s.rate*Math.PI*16*s.special*l[s.specialEasing](t,e))*s.volume*l[s.volumeEasing](t,e)},energy(i,s){for(let t=0,e=i.length;t<e;t++){let a=Math.sin(t*128*s.special*l[s.specialEasing](t,e)/e*Math.PI*2*Math.sin(t*32*s.special*l[s.specialEasing](t,e)/e*Math.PI*2));i[t]=a*s.volume*l[s.volumeEasing](t,e)}},ping(i,s){for(let t=0,e=i.length;t<e;t++)i[t]=Math.sin(t*2048*s.special*l[s.specialEasing](t,e)/e*x)*s.volume*l[s.volumeEasing](t,e)},chime(i,s){let t=1;for(let e=0,a=i.length,n=1;e<a;e++){e%Math.round(64*s.special*l[s.specialEasing](e,a))==0&&(t*=-1),e%Math.round(192*s.special*l[s.specialEasing](e,a))==0&&(n*=-1);let h=(t+n)/2;i[e]=h*s.volume*l[s.volumeEasing](e,a)}},cackle(i,s){let t=0;for(let e=0,a=i.length;e<a;e++)t=e/a*Math.PI,i[e]=Math.sin(t*512*Math.sin(t*8*s.special*l[s.specialEasing](e,a)))*s.volume*l[s.volumeEasing](e,a)},space(i,s){for(let t=0,e=i.length;t<e;t++){let a=s.special*l[s.specialEasing](t,e),n=t/e*Math.PI*128,h=Math.sin(n*Math.cos(n)*a);i[t]=h*s.volume*l[s.volumeEasing](t,e)}},synthesizer(i,s){let t=0;for(let e=0,a=i.length;e<a;e++)t=e/a*Math.PI,i[e]=Math.sin(t*8*Math.sin(t*1024*s.special*l[s.specialEasing](e,a)))*s.volume*l[s.volumeEasing](e,a)},electone(i,s){for(let t=0,e=i.length;t<e;t++){let a=Math.round(s.special*l[s.specialEasing](t,e)*1e3/200)*200,n=Math.sin(t/e*Math.PI*a);i[t]=n*s.volume*l[s.volumeEasing](t,e)}},echo(i,s){let t=0;for(let e=0,a=i.length;e<a;e++)t=e/a*Math.PI,i[e]=Math.sin(t*2048*s.special*l[s.specialEasing](e,a))*Math.sin(t*8)*s.volume*l[s.volumeEasing](e,a)},floating(i,s){let t=0;for(let e=0,a=i.length;e<a;e++)t=e/a*Math.PI,i[e]=Math.sin(t*(1024*s.special*l[s.specialEasing](e,a))/Math.cos(t*.5))*s.volume*l[s.volumeEasing](e,a)},zap(i,s){let t=0;for(let e=0,a=i.length;e<a;e++)t=e/a*Math.PI,i[e]=Math.sin(t*128/Math.sin(t*16*s.special*l[s.specialEasing](e,a)))*s.volume*l[s.volumeEasing](e,a)},bounce(i,s){let t=0;for(let e=0,a=i.length;e<a;e++)t=e/a*Math.PI,i[e]=Math.sin(t*32*(Math.round(e/a*100*s.special*l[s.specialEasing](e,a))%2==0?1:64))*s.volume*l[s.volumeEasing](e,a)},surprise(i,s){let t=0;for(let e=0,a=i.length;e<a;e++)t=e/a,i[e]=Math.sin(t*(Math.sin(t*p)*Math.PI)*2048*s.special*l[s.specialEasing](e,a))*s.volume*l[s.volumeEasing](e,a)},despair(i,s){let t=0;for(let e=0,a=i.length;e<a;e++)t=e/a,i[e]=Math.sin(t*(Math.cos(t*Math.PI*.25)*Math.PI)*2048*s.special*l[s.specialEasing](e,a))*s.volume*l[s.volumeEasing](e,a)},robot(i,s){let t=Array.from(Array(8)).map(()=>d(0,1));for(let e=0,a=i.length;e<a;e++){let n=s.special*l[s.specialEasing](e,a),h=Math.floor(e/a*8),c=Math.sin(e/a*Math.PI*4096*t[h]*n);i[e]=c*s.volume*l[s.volumeEasing](e,a)}}};var P=class{constructor(i){this.context=i,this.buffer=null,this.source=null}get data(){return this.buffer===null?null:this.buffer.getChannelData(0)}create(i,s){let t=s.rate*s.second;if(!(t<=0)){this.buffer=this.context.createBuffer(1,t,s.rate),M[i](this.data,s);for(let e=0,a=this.data.length;e<a;e++)this.data[e]<-1?this.data[e]=-1:this.data[e]>1&&(this.data[e]=1)}}play(i=.5){if(this.context.state==="running"){this.stop(),this.source=this.context.createBufferSource(),this.source.buffer=this.buffer;let s=this.context.createGain();this.source.connect(s),s.connect(this.context.destination),s.gain.value=i,this.source.start(this.context.currentTime)}}stop(){this.source!==null&&this.source.stop()}save(i){let s=this.createAudioBlob();this.download(i,s)}createAudioBlob(){let i=[this.buffer.getChannelData(0)],e=function(a,n){let h=new ArrayBuffer(44+a.length*2),c=new DataView(h),r=function(v,m,f){for(let u=0;u<f.length;u++)v.setUint8(m+u,f.charCodeAt(u))},g=function(v,m,f){for(let u=0;u<f.length;u++,m+=2){let E=Math.max(-1,Math.min(1,f[u]));v.setInt16(m,E<0?E*32768:E*32767,!0)}};return r(c,0,"RIFF"),c.setUint32(4,32+a.length*2,!0),r(c,8,"WAVE"),r(c,12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,1,!0),c.setUint16(22,1,!0),c.setUint32(24,n,!0),c.setUint32(28,n*2,!0),c.setUint16(32,2,!0),c.setUint16(34,16,!0),r(c,36,"data"),c.setUint32(40,a.length*2,!0),g(c,44,a),c}(function(a){let n=0;for(let r=0;r<a.length;r++)n+=a[r].length;let h=new Float32Array(n),c=0;for(let r=0;r<a.length;r++)for(let g=0;g<a[r].length;g++)h[c]=a[r][g],c++;return h}(i),this.context.sampleRate);return new Blob([e],{type:"audio/wav"})}download(i,s){let t=document.createElement("a");t.download=i,t.href=URL.createObjectURL(s),t.target="_blank",t.click()}},I=P;var w=class{constructor(){this.context=new(window.AudioContext||window.webkitAudioContext),window.addEventListener("click",()=>{this.context.state!=="running"&&this.context.resume().then(()=>{})})}create(s,t){let e=t||{};e.rate=e.rate===void 0?44100:e.rate,e.second=e.second===void 0?1:e.second,e.volume=e.volume===void 0?.5:e.volume,e.volumeEasing=e.volumeEasing===void 0?"none":e.volumeEasing,e.special=e.special===void 0?1:e.special,e.specialEasing=e.specialEasing===void 0?"none":e.specialEasing;let a=new I(this.context);return a.create(s,e),a}};window.Chirper=w;window.ChirperInstance=I;window.ChirperEasings=l;window.ChirperSamples=M;})();
